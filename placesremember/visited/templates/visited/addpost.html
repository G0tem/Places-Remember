{% extends 'visited/base.html' %}

{% block content %}

<form action="{% url 'addpost' %}" method="post">
    {% csrf_token %}

    <div class="form-error">{{ form.non_field_errors }}</div>

{% for f in form %}

<p><label class="form-label" for="{{ f.id_for_label }}">{{f.label}}: </label>{{ f }}</p>
    <div class="form-error">{{ f.errors }}</div>

{% endfor %}

    <button type="submit">Сохранить</button>
</form>


<style>
    #map {width:100%; height:600px;}
</style>
<div id="map"></div>

    <script>
      function initMap() {
        var location = {lat: 56.83831, lng: 60.603611}; // Координаты центра карты
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 8,
          center: location
        });
        var marker = new google.maps.Marker({
          position: location,
          map: map,
          draggable: true
        });
        google.maps.event.addListener(marker, 'dragend', function(event){
          document.getElementById('latitude').value = event.latLng.lat();
          document.getElementById('longitude').value = event.latLng.lng();
        });
      }

    </script>
    <input type="hidden" id="latitude" name="latitude" value="">
    <input type="hidden" id="longitude" name="longitude" value="">

{% endblock %}